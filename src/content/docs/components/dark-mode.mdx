---
title: Dark mode
description: A fully accessible dark mode toggle that respects user preferences and persists across page loads.
---

import { Aside, Tabs, TabItem } from '@astrojs/starlight/components';
// import { DarkMode } from 'accessible-astro-components';
import DarkMode from '../../../components/DarkMode.astro';
import { Icon } from 'astro-icon/components';

## Introduction

The Dark mode component provides a toggle for switching between light and dark color schemes. It uses system preferences, persists user choices, and follows accessibility best practices.

## When to use

- Website theming
- User interface customization
- Reducing eye strain in low-light conditions
- Respecting user system preferences
- Battery saving on OLED displays

## Usage


```astro
---
import { DarkMode } from 'accessible-astro-components'
---

<!-- Default with system preference -->
<DarkMode />

<!-- With custom icons -->
<DarkMode>
  <Icon name="ion:bulb" slot="light" />
  <Icon name="ion:bulb-outline" slot="dark" />
</DarkMode>
```

<Aside type="tip" title="Initial mode">
  Use the `initialMode` prop to set the default color scheme. Options are 'light', 'dark', or 'auto' (uses system preference).
</Aside>

## Props

<div class="props-wrapper"> 
| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `initialMode` | `'light' \| 'dark' \| 'auto'` | `'auto'` | Sets the initial color scheme mode |
| `label` | `string` | `'Toggle Dark Mode'` | Accessible label for the toggle button |
| `class` | `string` | `''` | Additional CSS classes to apply |
</div>

## Accessibility features

- Uses semantic button element
- Proper ARIA attributes (`aria-pressed`, `aria-label`)
- Keyboard navigation support
- Respects user's motion preferences
- High contrast icons
- Maintains focus states
- Persists across page loads using `localStorage`

## Styling

Make the DarkMode component your own with custom styling while maintaining its accessibility features.

<Aside type="caution" title="Accessibility considerations">
  When applying custom styles, ensure they don't compromise accessibility by maintaining sufficient color contrast and touch target sizes.
</Aside>

<Tabs>
  <TabItem label="Custom CSS">
    ```css
    /* Option 1: Using :global() in your style block */
    <style>
      :global(.darkmode-toggle) {
        font-size: 1.125rem;
        color: light-dark(hsl(215 8% 45%), hsl(215 8% 65%));
      }

      :global(.darkmode-toggle:hover) {
        color: light-dark(hsl(215 25% 27%), hsl(215 25% 89%));
      }

      /* Dark mode styles applied to html element */
      :global(.darkmode) {
        color-scheme: dark;
        background: hsl(0 0% 10%);
        color: hsl(0 0% 100%);
      }
    </style>

    /* Option 2: Using is:global on the style tag */
    <style is:global>
      .darkmode-toggle {
        font-size: 1.125rem;
        color: light-dark(hsl(215 8% 45%), hsl(215 8% 65%));
      }

      .darkmode-toggle:hover {
        color: light-dark(hsl(215 25% 27%), hsl(215 25% 89%));
      }

      /* Dark mode styles applied to html element */
      .darkmode {
        color-scheme: dark;
        background: hsl(0 0% 10%);
        color: hsl(0 0% 100%);
      }
    </style>
    ```
  </TabItem>
  <TabItem label="Tailwind Classes">
    ```astro
    <DarkMode 
      class="text-lg text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"
    >
      <Icon 
        name="ion:sunny" 
        slot="light"
        class="w-6 h-6"
      />
      <Icon 
        name="ion:moon" 
        slot="dark"
        class="w-6 h-6"
      />
    </DarkMode>
    ```
  </TabItem>
</Tabs>

<Aside type="note" title="Style scoping">
  Astro components use scoped styles by default. To override component styles, you'll need to use either `:global()` selectors or the `is:global` directive on your style tag.
</Aside>

## Interactive examples

See the DarkMode component in action with these practical examples demonstrating different variants and styling options.

<Aside type="note" title="View transitions">
  The component automatically handles Astro's view transitions using the `transition:persist` directive and `astro:after-swap` event listener.
</Aside>

### Default Style

<div class="not-content">
  <DarkMode />
</div>

### With Custom Icons

<div class="not-content">
  <DarkMode>
    <Icon name="ion:sunny" slot="light" />
    <Icon name="ion:moon" slot="dark" />
  </DarkMode>
</div>
